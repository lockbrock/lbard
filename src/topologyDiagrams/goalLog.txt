GOAL: 
2 # Send a bundle piece (RADIO)
    Must have fragment type 'q'

    ##>>> [20:52.47.255 55E5*] Packet #9 : length=213 bytes
    T+15241ms : from sid:55E52CBB48C9* to sid:3A54[0000]*
            Fragment type 'q' : Bundle piece (offset < 1MB)
            bid=6684C38103BB25E6*, version=b
            manifest bytes [0..127]
    ###>>> [20:52.47.255 55E5*] 6684C381*/11 manifest 0..127 (packet #9 offset 30)
                Bytes of piece:
                0000:  B0 02 82 55 E5 2C BB 48 C9 0C F6 0F 21 AF F3 7A
                0010:  7A F7 59 59 6C 47 10 83 9F 59 90 86 E8 DD A2 34
                0020:  AA E5 5B 83 91 CB DA E2 A5 4D B9 43 84 9B 35 71
                0030:  5D A8 FF 82 07 CC 36 2A 4F CA AF E6 5B 0C 78 DB
                0040:  DE 82 F6 26 A1 0B A4 00 A0 0B 80 66 84 C3 81 03
                0050:  BB 25 E6 B3 B6 2C 7D 70 A0 FF 1A EF 09 0D 10 84
                0060:  D3 1A 67 1A 30 8F 2E 9A 1A 44 AA 81 F0 DF A2 33
                0070:  FA D0 F4 79 AB 22 17 F9 E9 05 E2 06 18 11 07 6E
##3 # Send a Packet (LBARD)
    lbard[x] stderr

    ##T+19032ms : Sending length of bundle 4CD7906BD1FD9877C19B647EF6084ECA3773855BB92841FE92B9EAFD5D487F15 (bundle #0, version 1595388308835, cached_version 1595388308835)
    ##T+19032ms : Resending bundle 4CD7906BD1FD9877C19B647EF6084ECA3773855BB92841FE92B9EAFD5D487F15 from the start.
    ##T+19032ms : Sending length of bundle 4CD7906BD1FD9877C19B647EF6084ECA3773855BB92841FE92B9EAFD5D487F15 (bundle #0, version 1595388308835, cached_version 1595388308835)


4 # Receive a packet (LBARD)
    lbard[x] stderr

    ## >>> [18:45.20.858 3F76*] Peer 2360d9a33bea* HAS some bundle that we don't have (key prefix=D4A6*).
    *** TXing every 437+1d109ms, ratio=0.038 (1+0)
    >>> [18:45.21.915 3F76*] Progress receiving BID=92aefeabda1687ad* version 1595582106764: manifest is -1 bytes long (RX bitmap 0000), and body -1 bytes long. Bitmap p=    0 : YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
    >>> [18:45.21.915 3F76*] Scheduling bitmap report.
    >>> [18:45.23.135 3F76*] Progress receiving BID=92aefeabda1687ad* version 1595582106764: manifest is 258 bytes long (RX bitmap fcff), and body 50 bytes long. Bitmap p=    0 : Y
    >>> [18:45.23.135 3F76*] Scheduling bitmap report.
    >>> [18:45.24.385 3F76*] Progress receiving BID=92aefeabda1687ad* version 1595582106764: manifest is 258 bytes long (RX bitmap feff), and body 50 bytes long. Bitmap p=    0 : Y
    >>> [18:45.24.385 3F76*] Scheduling bitmap report.
    *** TXing every 437+1d109ms, ratio=0.462 (3+9)
    >>> [18:45.25.432 3F76*] Progress receiving BID=92aefeabda1687ad* version 1595582106764: manifest is 258 bytes long (RX bitmap ffff), and body 50 bytes long. Bitmap p=    0 : Y
   
    ###>>> [18:45.25.432 3F76*] We have the entire bundle 92aefeabda1687ad*/1595582106764 now.

    T+16086ms : Flushing 47 byte report from queue, 0 remaining.
    Sent report_queue message 'progress report' to 41968644eaf7*
    report_queue message:
    0000:  70 72 6F 67 72 65 73 73 20 72 65 70 6F 72 74 00  progress report.
    0010:  70 BE 8E 8A 7E 55 00 00 21 00 00 00 00 00 00 00  p....U..!.......
    0020:  34 63 64 37 39 30 36 62 64 31 66 64 39 38 37  4cd7906bd1fd987 
    >> List of bundles currently being received (0 in rhizome store)
    4cd7906bd1fd9877* version 1595388308835     : [M     #####/B            130/258, 0/50  [130 since last report]]


5 ### LBARD gets new bundle (ie. Rhizome sees it (added manually or wifi))
    lbard[x] stderr

    >>> [12:55.28.205 5657*] We have new bundle 4CD7906BD1FD9877C19B647EF6084ECA3773855BB92841FE92B9EAFD5D487F15/1595388308835


6 # Send a packet (WIFI)
# Send the manifest
##13:10:20.112 SERVALD:B Sending sync messsage SEND_MANIFEST 7C6DFA4953C22A63
##13:10:20.113 SERVALD:B Attempting to queue mdp packet from 6514735C70E4978F790CBC681C95E67B1EA1CE3DBFE49C8598C7A842D00E0018:18 to 7A43982622B4C3C80ED8CD5B3195A23C85F2B61882BF6204C806C7F1974C336C
##13:10:20.113 SERVALD:B Clearing SEND_MANIFEST 7C6DFA4953C22A63
##13:10:20.113 SERVALD:B FREE manifest 0x55d0908c5270
##13:10:20.113 SERVALD:B Send frame 464 bytes

# Send the bundle
##13:10:20.118 SERVALD:B Attempting to queue mdp packet from 6514735C70E4978F790CBC681C95E67B1EA1CE3DBFE49C8598C7A842D00E0018:18 to 7A43982622B4C3C80ED8CD5B3195A23C85F2B61882BF6204C806C7F1974C336C
...
##13:10:20.118 SERVALD:B Sending 7C6DFA4953C22A63 50 bytes (now 50 of 50)
##13:10:20.192 SERVALD:B Neighbour 7A43982622B4C3C80ED8CD5B3195A23C85F2B61882BF6204C806C7F1974C336C has now received 7C6DFA4953C22A63


#7 ### Receive a packet (WIFI)
# Has now received manifest
## 13:10:20.113 SERVALD:C NEW manifest 0x5608a6136010
## 13:10:20.113 SERVALD:C Processing sync message SEND_MANIFEST 7C6DFA4953C22A63 -1

# Receiving the bundle
13:10:20.170 SERVALD:C - Receiving payload [0 of 50]
13:10:20.170 SERVALD:C Peer 6514735C70E4978F790CBC681C95E67B1EA1CE3DBFE49C8598C7A842D00E0018 has 7C6DFA4953C22A63 RECV_PAYLOAD
13:10:20.186 SERVALD:C Processing sync message SEND_PAYLOAD 7C6DFA4953C22A63 -1
13:10:20.186 SERVALD:C Wrote to 7C6DFA4953C22A63 50, now 50 of 50

##INFO: [288103] 13:10:20.187 rhizome_database.c:1501:rhizome_add_manifest_to_store()  RHIZOME ADD MANIFEST service=file bid=3889B11DAFB5C6814EFB77EA2D4BE65F059D5006F08933D3C37CA1AD764D5FAA version=1595389191543


#8 ### fakeradio: rules
    radio_count=4
    RULE: 'allow between 6,5'

#9 ### Get SID of each node
13:09:48.407 SIDB=6514735C70E4978F790CBC681C95E67B1EA1CE3DBFE49C8598C7A842D00E0018

10 Fakeradio communication??

##### Radio, 3 to -1 (broadcast)
Filter and enqueue 52 bytes from 3 -> -1
>>> [13:10.05.950 7408*] Packet #4 : length=52 bytes

####### After broadcast, fakeradio then filters based on rules
>>> [13:10.05.950 RADIO] @ T+14683ms: 85 bytes, 4 packets, 48 sync bytes, 0 manifest bytes, 0 body bytes, 0 colissions, 29.5% channel utilisation.
Filter and enqueue 52 bytes from 3 -> 0
Dropped packet due to rule #2
Filter and enqueue 52 bytes from 3 -> 1
Dropped packet due to rule #2
Filter and enqueue 52 bytes from 3 -> 2
Keeping packet due to rule #1

10 #### fakeradio manifest
    Filter and enqueue 203 bytes from 0 -> -1
    >>> [13:10.07.123 6E82*] Packet #10 : length=203 bytes
    T+15856ms : from sid:6E825E21D91E* to sid:6514[0000]*
            Fragment type 'q' : Bundle piece (offset < 1MB)
            bid=3889B11DAFB5C681*, version=173749b2577
            manifest bytes [0..127]
    >>> [13:10.07.123 6E82*] 3889B11D*/1595389191543 manifest 0..127 (packet #10 offset 20)
                Bytes of piece:
                0000:  B0 00 A0 F7 CA EC A4 B7 2E 80 38 89 B1 1D AF B5
                0010:  C6 81 4E FB 77 EA 2D 4B E6 5F 05 9D 50 06 F0 89
                0020:  33 D3 C3 7C A1 AD 76 4D 5F AA 81 87 DF 6C D1 C6
                0030:  D0 27 88 C2 CA E1 66 08 A8 5F 4F 36 E8 DA 46 FA
                0040:  38 7F D5 F8 B6 FD AF 33 76 9D 18 A2 F7 CA EC A4
                0050:  B7 2E 6E 61 6D 65 3D 66 69 6C 65 31 0A A1 32 90
                0060:  13 21 C7 84 8D 4B 88 61 A0 86 5E B3 60 D8 E1 C9
                0070:  8E AC D1 11 8A 3C 06 04 2E FE D2 01 71 0A A2 E7
    There are 3 filter rules.
    
    >>> [13:10.07.124 RADIO] @ T+15857ms: 361 bytes, 10 packets, 120 sync bytes, 128 manifest bytes, 0 body bytes, 0 colissions, 3.4% channel utilisation.
    Filter and enqueue 203 bytes from 0 -> 1
    Keeping packet due to rule #0
    T+15857ms : from sid:6E825E21D91E* to sid:6514[0000]*
            Fragment type 'q' : Bundle piece (offset < 1MB)
            bid=3889B11DAFB5C681*, version=173749b2577
            manifest bytes [0..127]
                Bytes of piece:
                0000:  B0 00 A0 F7 CA EC A4 B7 2E 80 38 89 B1 1D AF B5
                0010:  C6 81 4E FB 77 EA 2D 4B E6 5F 05 9D 50 06 F0 89
                0020:  33 D3 C3 7C A1 AD 76 4D 5F AA 81 87 DF 6C D1 C6
                0030:  D0 27 88 C2 CA E1 66 08 A8 5F 4F 36 E8 DA 46 FA
                0040:  38 7F D5 F8 B6 FD AF 33 76 9D 18 A2 F7 CA EC A4
                0050:  B7 2E 6E 61 6D 65 3D 66 69 6C 65 31 0A A1 32 90
                0060:  13 21 C7 84 8D 4B 88 61 A0 86 5E B3 60 D8 E1 C9
                0070:  8E AC D1 11 8A 3C 06 04 2E FE D2 01 71 0A A2 E7
    There are 3 filter rules.
    Filter and enqueue 203 bytes from 0 -> 2
    Dropped packet due to rule #2
    Filter and enqueue 203 bytes from 0 -> 3
    Dropped packet due to rule #2
    Filter and enqueue 104 bytes from 1 -> -1

11 ####Fakeradio bundle
    >>> [13:10.08.244 RADIO] @ T+16977ms: 704 bytes, 16 packets, 182 sync bytes, 192 manifest bytes, 50 body bytes, 0 colissions, 3.2% channel utilisation.
    Filter and enqueue 223 bytes from 0 -> 1
    Keeping packet due to rule #0
    T+16977ms : from sid:6E825E21D91E* to sid:0000[0000]*
            Fragment type 'L' : unknown
            bid=3889B11DAFB5C681*, version=173749b2577
    There are 3 filter rules.
    T+16978ms : from sid:6E825E21D91E* to sid:6514[0000]*
            Fragment type 'p' : Bundle end piece (offset < 1MB)
            bid=3889B11DAFB5C681*, version=173749b2577
            body length = 49
    There are 3 filter rules.
    T+16978ms : from sid:6E825E21D91E* to sid:6514[0000]*
            Fragment type 'q' : Bundle piece (offset < 1MB)
            bid=3889B11DAFB5C681*, version=173749b2577
            manifest bytes [128..191]
            Bytes of piece:
            0000:  FB 2D B2 EC 50 60 D0 FA 3D CE E3 77 EF DE DD 64
            0010:  C3 C8 ED 76 C7 83 DB EE BB DC CA C8 4A F2 A8 90
            0020:  00 17 65 93 D3 9E FF 89 07 CC A9 3C E1 CB 35 27
            0030:  73 67 3E 2A 34 F9 C6 10 63 DB BE 5A A3 49 8E E9
    There are 3 filter rules.
    Filter and enqueue 223 bytes from 0 -> 2
    Dropped packet due to rule #2
    Filter and enqueue 223 bytes from 0 -> 3
    Dropped packet due to rule #2

    # FAKERADIO 
    # Get every >>> that contains 'RADIO'
    # Add to var until the /next/ >>> BUT NOT INCLUDING
    
    # While not end of long ass, multi-line string
        # If contains [x] -> [x] then
            # Loop through each line and see if it contains the fragment type
            # until contains next [x] -> [x] 
        # May contain multiple.. sooooo
    # Print to file

    ##>>> [16:38.49.177 RADIO] @ T+51509ms: 13300 bytes, 273 packets, 3276 sync bytes, 326 manifest bytes, 4360 body bytes, 1 colissions, 3.7% channel utilisation.
    Filter and enqueue 99 bytes from 1 -> 0
    Keeping packet due to rule #0
    T+51509ms : from sid:A8DC6D669538* to sid:0000[0000]*
            Fragment type 'M' : Bundle transfer progress bitmap
            bid=29C6CF2F3484C8B7*, version=0
    There are 4 filter rules.
    Filter and enqueue 99 bytes from 1 -> 2
    Keeping packet due to rule #1
    T+51509ms : from sid:A8DC6D669538* to sid:0000[0000]*
            Fragment type 'M' : Bundle transfer progress bitmap
            bid=29C6CF2F3484C8B7*, version=0
    There are 4 filter rules.
    Filter and enqueue 99 bytes from 1 -> 3
    Dropped packet due to rule #3
    Filter and enqueue 52 bytes from 3 -> -1

    # If bundle, then print what bytes it sends (if not full)

    >>> [16:38.49.646 RADIO] @ T+51978ms: 13531 bytes, 277 packets, 3324 sync bytes, 326 manifest bytes, 4488 body bytes, 1 colissions, 3.7% channel utilisation.
    Filter and enqueue 203 bytes from 0 -> 1
    Keeping packet due to rule #0
    T+51978ms : from sid:D746535FEC10* to sid:A8DC[0000]*
            Fragment type 'q' : Bundle piece (offset < 1MB)
            bid=29C6CF2F3484C8B7*, version=1738f19780d
            body bytes [3200..3327] (128 bytes) @ T+51978ms
                Bytes of piece:
                0000:  33 32 30 30 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E
                0010:  2E 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E 66 69 6C 65
                0020:  31 21 22 23 24 25 26 27 28 29 2A 2B 2C 2D 2E 2F
                0030:  30 31 32 33 34 35 36 37 38 39 3A 3B 3C 3D 3E 3F
                0040:  40 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F
                0050:  50 51 52 53 54 55 56 57 58 59 5A 5B 5C 5D 5E 5F
                0060:  60 61 62 63 64 65 66 67 68 69 6A 6B 6C 6D 6E 6F
                0070:  70 71 72 73 74 75 76 77 78 79 7A 7B 7C 7D 7E 0A
    There are 4 filter rules.
    Filter and enqueue 203 bytes from 0 -> 2
    Dropped packet due to rule #3
    Filter and enqueue 203 bytes from 0 -> 3
    Dropped packet due to rule #3
    Filter and enqueue 52 bytes from 3 -> -1









#### 12 Show the Wifi setup somehow
    Get each of the instances of the devices??
16:04:25.418 Servald instance B is being connected to Wifi interface {1}



#### Convert T+ to real timestamp.. no idea whose idea it was to store in T+.. great idea though..
>>> [18:45.36.857 9280*] Flushing 22 byte report from queue, 0 remaining.
T+30468ms : Flushing 22 byte report from queue, 0 remaining.

18:45:06.376 # executeOk --core-backtrace --timeout=600 --executable=lbard --stdout-file=E_LBARDOUT --stderr-file=E_LBARDERR 127.0.0.1:4114 lbard:lbard 9280164C7615E9E61E954219E39B531BB5CF032EA1BCE6CFF0A21ED517FE1A5A FEC1C61CCE2A2E70FE4135C6463980D907915FDA12F352C2C1A567FB1B35A76A /dev/pts/6 announce pull bundles
    67506376
+      30468ms
=   67536844

####################################################################################################################
####################################################################################################################
####################################################################################################################
####################################################################################################################
GLOBAL MINOR EVENTS
15:23:17.696 SERVALD:B Adding 15EB502E2D2D9521 to tree
15:23:17.696 SERVALD:B RHIZOME ADD MANIFEST service=file bid=5B5C41D3EC7FC6DD6B8FEC75EDFA5E2AE400DE5B5B119FF875220A8DD1143AC1 version=1595915577526


15:23:17.858 SERVALD:B Clearing SEND_BAR 15EB502E2D2D9521
15:23:17.858 SERVALD:B Neighbour 8AEF473837C24E56ADD9C864228A0B453BF70161639D851A5FBC150E15977052 does not have 15EB502E2D2D9521 that we do
15:23:17.916 SERVALD:C Adding 15EB502E2D2D9521 to tree

15:23:17.922 SERVALD:B Neighbour 8AEF473837C24E56ADD9C864228A0B453BF70161639D851A5FBC150E15977052 has now received 15EB502E2D2D9521

14:47:38.169 SERVALD:C Neighbour BD149D5799D768E8CD72FF797611BF3C154C92F961D2D1E0662E02DFBBDB6573 has 951F4302854BFB92 that we need
TODO: Combine send/req manifest with send frame?


/========== TO DO: ===============
14:47:38.214 SERVALD:B Clearing SEND_PAYLOAD 951F4302854BFB92
14:47:38.214 SERVALD:B FREE manifest 0x5588027fee50
14:47:38.214 SERVALD:B Queued transfer message SEND_PAYLOAD 951F4302854BFB92
14:47:38.214 SERVALD:B Sending 951F4302854BFB92 50 bytes (now 50 of 50)


14:47:38.240 SERVALD:C Processing sync message SEND_PAYLOAD 951F4302854BFB92 -1
14:47:38.240 SERVALD:C Wrote to 951F4302854BFB92 50, now 50 of 50
14:47:38.242 SERVALD:C ADD MANIFEST service=file bid=EB7E8ABC39C548D939C5AB1E0015B7D5389D7C3FFBD1BE44439DC7C0A5F6730C version=1596604638358
14:47:38.242 SERVALD:C Adding 951F4302854BFB92 to tree

//LBARD:B Peer de0e276fb5f1* HAS some bundle that we don't have (key prefix=0A27*).

####################################################################################################################
####################################################################################################################
MAJOR EVENTS

### ALL FAKERADIO TRAFFIC
15:23:17.673 FAKERADIO A -> B [Bundle end piece ] [167 bytes]


### SENDING manifests W/ WIFI
15:23:17.862 SERVALD:C Attempting to queue mdp packet from 8AEF473837C24E56ADD9C864228A0B453BF70161639D851A5FBC150E15977052:18 to 2BEF74429C78AEB1347B6182E8689F9B9644EDF74379D7C0635F5649D85A2F39
    ## BUT ONLY FOR RECEIVER (ie. don't show twice)
    (Don't show this) 15:23:17.868 SERVALD:B Attempting to queue mdp packet from 2BEF74429C78AEB1347B6182E8689F9B9644EDF74379D7C0635F5649D85A2F39:18 to 8AEF473837C24E56ADD9C864228A0B453BF70161639D851A5FBC150E15977052
15:23:17.868 SERVALD:B Send frame 464 bytes

### Sending/receiving bundles with rhizome
15:23:17.876 SERVALD:B Sending 15EB502E2D2D9521 50 bytes (now 50 of 50)
15:23:17.876 SERVALD:B Sending sync messsage SEND_PAYLOAD 15EB502E2D2D9521
15:23:17.914 SERVALD:C Processing sync message SEND_PAYLOAD 15EB502E2D2D9521 -1
15:23:17.915 SERVALD:C Wrote to 15EB502E2D2D9521 50, now 50 of 50

####################################################################################################################
####################################################################################################################


LBARD
### [11:58.41.550 42E2*] : Handler consumed 12 packet bytes.
packet before decode_rs:
0000:  A9 A3 AB 70 7A EA 0B 00 53 0C 80 40 24 99 CE 9F  ...pz...S..@$...
0010:  A2 ED 84 FB 69 3A FC 3B F5 EA 01 67 37 7A 87 26  ....i:.;...g7z.&
0020:  42 D2 9F 3B BE 07 E6 28 43 B4 B9 3E E7 2D 5C BE  B..;...(C..>.-\.
0030:  20 9B D5 1D   ...            
received packet:
0000:  A9 A3 AB 70 7A EA 0B 00 53 0C 80 40 24 99 CE 9F  ...pz...S..@$...
0010:  A2 ED 84 FB 69 3A FC 3B F5 EA 01 67 37 7A 87 26  ....i:.;...g7z.&
0020:  42 D2 9F 3B BE 07 E6 28 43 B4 B9 3E E7 2D 5C BE  B..;...(C..>.-\.
0030:  20 9B D5 1D   ...            
Decoding message #11 from a9a3ab707aea*, length = 20:

Registering peer 42e2d48d1826*

###>>> [11:58.32.136 A9A3*] I just sent manifest piece [128,258) for 42e2d48d1826*.


### [11:58.40.559 42E2*] : Calling message handler for type 'S' @ offset 0xd


###########
Add broadcast stuff
If no specified type, then assume sync/frame 

Filter and enqueue 52 bytes from 5 -> -1
>>> [11:58.32.036 C261*] Packet #11 : length=52 bytes
>>> [11:58.32.036 RADIO] @ T+15687ms: 220 bytes, 11 packets, 132 sync bytes, 0 manifest bytes, 0 body bytes, 0 colissions, 3.1% channel utilisation.
Filter and enqueue 52 bytes from 5 -> 0
Dropped packet due to rule #3
Filter and enqueue 52 bytes from 5 -> 1
Dropped packet due to rule #3
Filter and enqueue 52 bytes from 5 -> 2
Dropped packet due to rule #3
Filter and enqueue 52 bytes from 5 -> 3
Dropped packet due to rule #3
Filter and enqueue 52 bytes from 5 -> 4
Keeping packet due to rule #2
Filter and enqueue 65 bytes from 2 -> -1
>>> [11:58.32.087 68F2*] Packet #12 : length=65 bytes